<!-- Required for react projects hosted on portfolio domain to resolve the refresh nested route error when project is using react router -->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>404 Not Found</title>
		<script type="text/javascript">
			var pathSegmentsToKeep = 1; // Adjust based on how many path segments you need to keep
			var maxRedirects = 1; // Limit to 1 redirect attempt

			var l = window.location;

			// Check the number of redirects from sessionStorage
			var redirectCount = parseInt(sessionStorage.getItem('redirects')) || 0;

			// If the number of redirects exceeds the limit, show a 404 Not Found message
			if (redirectCount >= maxRedirects) {
				document.body.innerHTML = "<h1>404 Not Found</h1><p>The page you are looking for doesn't exist.</p>";
				return;
			}

			// Increment the redirect count and store it in sessionStorage
			redirectCount += 1;
			sessionStorage.setItem('redirects', redirectCount);

			// Build the new path
			var newPath =
				l.protocol +
				'//' +
				l.hostname +
				(l.port ? ':' + l.port : '') +
				l.pathname
					.split('/')
					.slice(0, 1 + pathSegmentsToKeep)
					.join('/') +
				'/?/';

			var remainingPath = l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/');

			if (l.search) {
				newPath += remainingPath.replace(/&/g, '~and~') + '&' + l.search.slice(1).replace(/&/g, '~and~');
			} else {
				newPath += remainingPath;
			}

			if (l.hash) {
				newPath += l.hash;
			}

			// Redirect to the new path
			l.replace(newPath);
		</script>
	</head>
	<body></body>
</html>
